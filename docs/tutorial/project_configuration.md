# Project Configuration editor

To allow the user to have multiple configurations for the same project, the user can define several settings to produce different build results. For example, take a look at the [multiple configuration tutorial](./tutorial/multiple_config.md) which uses the ESP-IDF CMake build system [multi_config](https://github.com/espressif/esp-idf/tree/master/examples/build_system/cmake/multi_config) example.

Use the `ESP-IDF: Open Project Configuration` to manage the project configuration profiles to record the following settings for each configuration:

`idf.cmakeCompilerArgs`
`idf.ninjaArgs`
`idf.buildPath`
`idf.sdkconfigFilePath`
`idf.sdkconfigDefaults`

`idf.customExtraVars`
`idf.adapterTargetName`
`idf.flashBaudRate`
`idf.monitorBaudRate`

`idf.openOcdDebugLevel`
`idf.openOcdConfigs`
`idf.openOcdLaunchArgs`

`idf.preBuildTask`
`idf.postBuildTask`
`idf.preFlashTask`
`idf.postFlashTask`

After defining a profile and the settings for each profile use the `ESP-IDF: Select project configuration` command to choose the configuration to override extension configuration settings.

There are many use cases for having multiple configurations profiles. It allows the user to store settings together and easily switch between one and the other. Let's explore one of this use cases here, having a development and production build profiles.

# Development and Release profiles for ESP-IDF project

In the ESP-IDF CMake build system, the project configuration settings are saved using the `idf.py menuconfig` (or the SDK Configuration editor in IDEs) which store these values in a `sdkconfig` file. This file is used by the build system and the source code. When the current ESP-IDF project is under version control system, the `sdkconfig` can change on any user build due to many local environment configuration which can alter the project expected behavior. For such a reason is better to move those project specific settings to an `sdkconfig.defaults` which is not modified by the build system and `sdkconfig` can be added to the `.gitignore` list. This `sdkconfig.defaults` can be generated by `idf.py save-defconfig`.

The default case, without using any project configuration editor setting would be to create an `sdkconfig` file in the ESP-IDF project root directory. Initially the user would use the default case but later it would like to commit the project for version control. Since `sdkconfig` contains many values that are not specific to the project, the user would like to save only those values that are required for the project. These values would be the first **production** profile.

1. For the current project, run the `ESP-IDF: Open ESP-IDF Terminal` command to launch an ESP-IDF loaded terminal.

2. Run the `idf.py save-defconfig` command to generate a `sdkconfig.defaults` file.

3. Use the `ESP-IDF: Open Project Configuration` and create a new profile with name `production`. Set `sdkconfig defaults` the previous `sdkconfig.defaults` file. If you want to separate generated binaries of this new **production** profile from the default case, specify a different build folder using the `Build Directory path` to something like `/path/to/current/project/build_production` and the `sdkconfig file path` to something like `/path/to/current/project/build_production/sdkconfig` to avoid mixing development sdkconfig with production sdkconfig files.

4. Create a new profile with name `development`. You can set the build folder using the `Build Directory path` to something like `/path/to/current/project/build_dev` and the `sdkconfig file path` to something like `/path/to/current/project/build_dev/sdkconfig` to avoid mixing development sdkconfig with production sdkconfig files.

5. After creating each profile and the configuration settings for each profile, click the `Save` button and use the `ESP-IDF: Select project configuration` command to choose the profile to override extension configuration settings.

6. When you choose the **production** profile and use the `ESP-IDF: Build your project` the binaries are going to be created in `/path/to/current/project/build_production`. If you choose the **development** profile, the binaries are going to be created in `/path/to/current/project/build_dev`.

7. These profiles and each profile settings are going to be saved in the `/path/to/current/project/esp_idf_project_configuration.json`.

The production environment could be split into multiple production profiles, as it is done in the [ESP-IDF CMake Multiple configuration example](https://github.com/espressif/esp-idf/tree/master/examples/build_system/cmake/multi_config) and the [multiple configuration tutorial](./multiple_config.md) by separating common sdkconfig settings in a `sdkconfig.prod_common` and product specific settings in `sdkconfig.prod1` and `sdkconfig.prod2` respectively. Multiple sdkconfig defaults files can be specified in the project configuration editor profile `sdkconfig defaults` field as `sdkconfig.prod_common;sdkconfig.prod1` where the values are loaded in order as explained in [here](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/build-system.html?highlight=sdkconfig%20defaults#custom-sdkconfig-defaults).


This is just an example of the possibility of this project configuration editor. You can define multiple settings for different kinds of development scenarios such as testing, profiling, etc.


